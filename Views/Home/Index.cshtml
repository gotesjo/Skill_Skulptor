@{
    ViewData["Title"] = "Index";
}
@model List<CV>

<!-- Header för startsidan-->
@* <div class="jumbotron jumbotron-fluid pt-0">
        <img class="img-fluid" src="~/datafiles/pictures/logobluelarge.png" />
 </div> *@

<section class="bg-primary text-light p-5">
    <div class="container">
        <div class="d-md-flex justify-content-evenly align-items-center">
            <h2 class="mb-3">Skill Skulptor</h2>
            <h3 class="mb-3">Sök på cv</h3>
            <form method="post" action="@Url.Action("Index", "Home")">
                <div class="input-group mb-3 cvsearch-input">
                    <input type="text" name="search" class="form-control flex-grow-1" placeholder="Sök på användares namn" aria-label="Sökning" aria-describedby="button-addon2">
                    <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Sök</button>
                </div>
            </form>
        </div>
    </div>
</section>

<!-- About-->
<section class="resume-section pb-4" id="about">
    <div class="resume-section-content">
        <div class="subheading mb-5 p-5">
            <h2>@ViewBag.Heading</h2>
            <div class="row align-items-center pt-3">
                @foreach(var cv in Model)
                {
                    <div class="col card m-3 bg-primary">
                        <a asp-controller="Resume" asp-action="Index" asp-route-id="@cv.fkUser.Id">
                            <img src="@Url.Action("UserImage", "Profile", new { userId = @cv.fkUser.Id })" class="rounded-circle mr-1 m-3" alt="@cv.fkUser.Firstname @cv.fkUser.Lastname" width="100" height="100">
                            <h3>@cv.fkUser.Firstname @cv.fkUser.Lastname</h3>
                            <h6 class="subheading">@cv.Summary</h6>
                            <br />
                            <h5>Detta är mina Erfarenheter</h5>
                            @if (cv.Experiences.Any())
                            {
                                <h6>@cv.Experiences.First().Position Employer: @cv.Experiences.First().Employer</h6>
                            }
                            else
                            {
                                <h6>Inga Erfarenheter</h6>
                            }
                            <h5>Utbildningar</h5>
                            @if (cv.Educations.Any())
                            {
                                <h6>@cv.Educations.First().Institution Utbildning: @cv.Educations.First().Course</h6>
                            }
                            else
                            {
                                <h6>Ingen utbildning</h6>
                            }
                        </a>
                    </div>
                    
                }
                @if (User.Identity.IsAuthenticated)
                {
                    <div class="text-center">
                        <h4>Klickräknare för ditt CV:</h4>
                        @foreach (var cv in Model)
                        {
                            @if (User.Identity.Name == cv.fkUser.UserName) // Visa räknaren endast för inloggad användare vars CV visas
                            {
                                <p>Antal klick: @cv.Clicks</p>
                            }
                        }
                    </div>
                }
            </div>
        </div>
    </div>

    <div class="jumbotron" >
        <h3 class="dispaly-3">Senaste upplagda projektet</h3>
        <p class="lead">@ViewBag.Project.ProjectName</p>
        <hr class="my-4">
        <p>@ViewBag.Project.Description</p>
        <p class="lead">
            @if (User.Identity.IsAuthenticated)
            {
                <a class="btn btn-primary btn-lg" href="@Url.Action("JoinProject", "Projekt", new { projectId = ViewBag.Project.ProjectId })" role="button">Gå med i projektet</a>
            }
        </p>
    </div>

</section>

